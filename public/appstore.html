<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>AI Agent Marketplace - App Store</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="/icon.png">
  <style>
    /* ============================================
       APPLE APP STORE EXACT REPLICA
       iOS 18 Design System Implementation
       ============================================ */

    :root {
      /* iOS 18 System Colors - Exact Values */
      --system-blue: #007AFF;
      --system-blue-dark: #0A84FF;
      --system-green: #34C759;
      --system-green-dark: #30D158;
      --system-indigo: #5856D6;
      --system-indigo-dark: #5E5CE6;
      --system-orange: #FF9500;
      --system-orange-dark: #FF9F0A;
      --system-pink: #FF2D55;
      --system-pink-dark: #FF375F;
      --system-purple: #AF52DE;
      --system-purple-dark: #BF5AF2;
      --system-red: #FF3B30;
      --system-red-dark: #FF453A;
      --system-teal: #5AC8FA;
      --system-teal-dark: #64D2FF;
      --system-yellow: #FFCC00;
      --system-yellow-dark: #FFD60A;

      /* Grayscale */
      --system-gray: #8E8E93;
      --system-gray-2: #AEAEB2;
      --system-gray-3: #C7C7CC;
      --system-gray-4: #D1D1D6;
      --system-gray-5: #E5E5EA;
      --system-gray-6: #F2F2F7;

      /* Light Mode */
      --bg-primary: #FFFFFF;
      --bg-secondary: #F2F2F7;
      --bg-elevated: #FFFFFF;
      --label-primary: #000000;
      --label-secondary: rgba(60, 60, 67, 0.6);
      --label-tertiary: rgba(60, 60, 67, 0.3);
      --separator: rgba(60, 60, 67, 0.29);
      --fill-primary: rgba(120, 120, 128, 0.2);
      --fill-secondary: rgba(120, 120, 128, 0.16);

      /* Typography - SF Pro */
      --font: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', system-ui, sans-serif;
      --font-rounded: 'SF Pro Rounded', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;

      /* iOS Typography Scale */
      --text-large-title: 700 34px/41px var(--font);
      --text-title-1: 700 28px/34px var(--font);
      --text-title-2: 700 22px/28px var(--font);
      --text-title-3: 600 20px/25px var(--font);
      --text-headline: 600 17px/22px var(--font);
      --text-body: 400 17px/22px var(--font);
      --text-callout: 400 16px/21px var(--font);
      --text-subhead: 400 15px/20px var(--font);
      --text-footnote: 400 13px/18px var(--font);
      --text-caption-1: 400 12px/16px var(--font);
      --text-caption-2: 400 11px/13px var(--font);

      /* Radii */
      --radius-xs: 4px;
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 20px;
      --radius-2xl: 24px;
      --radius-full: 9999px;

      /* App Icon Radius (iOS standard) */
      --icon-radius-sm: 12px;
      --icon-radius-md: 16px;
      --icon-radius-lg: 22.37%;

      /* Tab bar */
      --tab-height: 49px;
      --tab-height-safe: calc(49px + env(safe-area-inset-bottom, 34px));

      /* Spacing */
      --space-1: 4px;
      --space-2: 8px;
      --space-3: 12px;
      --space-4: 16px;
      --space-5: 20px;
      --space-6: 24px;
    }

    /* Dark Mode */
    @media (prefers-color-scheme: dark) {
      :root {
        --bg-primary: #000000;
        --bg-secondary: #1C1C1E;
        --bg-elevated: #2C2C2E;
        --label-primary: #FFFFFF;
        --label-secondary: rgba(235, 235, 245, 0.6);
        --label-tertiary: rgba(235, 235, 245, 0.3);
        --separator: rgba(84, 84, 88, 0.65);
        --fill-primary: rgba(120, 120, 128, 0.36);
        --fill-secondary: rgba(120, 120, 128, 0.32);
        --system-blue: var(--system-blue-dark);
        --system-green: var(--system-green-dark);
      }
    }

    /* Reset */
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
    }

    html {
      height: 100%;
      font: var(--text-body);
      -webkit-font-smoothing: antialiased;
      -webkit-text-size-adjust: 100%;
      text-size-adjust: 100%;
    }

    body {
      font-family: var(--font);
      background: var(--bg-secondary);
      color: var(--label-primary);
      min-height: 100%;
      padding-bottom: var(--tab-height-safe);
      overscroll-behavior: none;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    button {
      font-family: inherit;
      cursor: pointer;
    }

    img, video {
      display: block;
      max-width: 100%;
    }

    /* ============================================
       NAVIGATION BAR (Large Title Style)
       ============================================ */

    .navigation-bar {
      position: sticky;
      top: 0;
      z-index: 50;
      background: var(--bg-secondary);
      padding: var(--space-4);
      padding-top: calc(env(safe-area-inset-top, 0px) + var(--space-4));
    }

    .navigation-bar.scrolled {
      background: rgba(242, 242, 247, 0.72);
      backdrop-filter: saturate(180%) blur(20px);
      -webkit-backdrop-filter: saturate(180%) blur(20px);
      border-bottom: 0.33px solid var(--separator);
    }

    @media (prefers-color-scheme: dark) {
      .navigation-bar.scrolled {
        background: rgba(28, 28, 30, 0.72);
      }
    }

    .nav-large-title {
      font: var(--text-large-title);
      margin-bottom: var(--space-3);
    }

    .nav-inline-title {
      font: var(--text-headline);
      text-align: center;
      display: none;
    }

    .navigation-bar.scrolled .nav-large-title {
      display: none;
    }

    .navigation-bar.scrolled .nav-inline-title {
      display: block;
    }

    /* Search Field */
    .search-field {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      background: var(--fill-secondary);
      border-radius: var(--radius-md);
      padding: var(--space-2) var(--space-3);
      transition: background 0.2s;
    }

    .search-field:focus-within {
      background: var(--fill-primary);
    }

    .search-field svg {
      width: 17px;
      height: 17px;
      color: var(--label-secondary);
      flex-shrink: 0;
    }

    .search-field input {
      flex: 1;
      font: var(--text-body);
      background: none;
      border: none;
      outline: none;
      color: var(--label-primary);
      min-width: 0;
    }

    .search-field input::placeholder {
      color: var(--label-secondary);
    }

    /* ============================================
       TAB BAR
       ============================================ */

    .tab-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 100;
      display: flex;
      justify-content: space-around;
      background: rgba(249, 249, 249, 0.94);
      backdrop-filter: saturate(180%) blur(20px);
      -webkit-backdrop-filter: saturate(180%) blur(20px);
      border-top: 0.33px solid var(--separator);
      padding-bottom: env(safe-area-inset-bottom, 0px);
      height: var(--tab-height-safe);
    }

    @media (prefers-color-scheme: dark) {
      .tab-bar {
        background: rgba(29, 29, 31, 0.94);
      }
    }

    .tab-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 1px;
      flex: 1;
      padding: 4px 0 2px;
      color: var(--system-gray);
      transition: color 0.15s;
    }

    .tab-item.active {
      color: var(--system-blue);
    }

    .tab-item svg {
      width: 25px;
      height: 25px;
    }

    .tab-item span {
      font: var(--text-caption-2);
    }

    /* ============================================
       CONTENT SECTIONS
       ============================================ */

    .page-content {
      padding: 0 var(--space-4);
    }

    .section {
      margin-bottom: var(--space-6);
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-3);
    }

    .section-title {
      font: var(--text-title-2);
    }

    .section-action {
      font: var(--text-headline);
      color: var(--system-blue);
    }

    /* ============================================
       TODAY CARD (Large Featured Card)
       ============================================ */

    .today-card {
      position: relative;
      border-radius: var(--radius-2xl);
      overflow: hidden;
      background: var(--bg-elevated);
      box-shadow: 0 2px 8px rgba(0,0,0,0.08), 0 0 1px rgba(0,0,0,0.04);
      margin-bottom: var(--space-5);
    }

    .today-card-media {
      position: relative;
      aspect-ratio: 2/1.2;
      overflow: hidden;
    }

    .today-card-media img,
    .today-card-media video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .today-card-gradient {
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, transparent 30%, rgba(0,0,0,0.7) 100%);
    }

    .today-card-content {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: var(--space-5);
      color: #fff;
    }

    .today-card-label {
      font: var(--text-footnote);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.6px;
      opacity: 0.8;
      margin-bottom: var(--space-1);
    }

    .today-card-title {
      font: var(--text-title-1);
      margin-bottom: var(--space-1);
    }

    .today-card-subtitle {
      font: var(--text-subhead);
      opacity: 0.85;
    }

    /* ============================================
       APP ROW (Standard List Item)
       ============================================ */

    .app-row {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      padding: var(--space-3) 0;
      border-bottom: 0.33px solid var(--separator);
    }

    .app-row:last-child {
      border-bottom: none;
    }

    .app-row:active {
      opacity: 0.6;
    }

    .app-icon {
      width: 64px;
      height: 64px;
      border-radius: var(--icon-radius-md);
      object-fit: cover;
      background: var(--fill-secondary);
      flex-shrink: 0;
    }

    .app-icon-sm {
      width: 48px;
      height: 48px;
      border-radius: var(--icon-radius-sm);
    }

    .app-info {
      flex: 1;
      min-width: 0;
    }

    .app-name {
      font: var(--text-headline);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .app-subtitle {
      font: var(--text-subhead);
      color: var(--label-secondary);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .app-meta {
      font: var(--text-caption-1);
      color: var(--label-tertiary);
      margin-top: 2px;
    }

    /* GET Button */
    .get-button {
      background: var(--fill-primary);
      color: var(--system-blue);
      font: var(--text-headline);
      padding: 6px 20px;
      border-radius: var(--radius-full);
      border: none;
      flex-shrink: 0;
      min-width: 72px;
      transition: all 0.15s;
    }

    .get-button:active {
      transform: scale(0.97);
      opacity: 0.8;
    }

    .get-button.open {
      background: var(--system-blue);
      color: #fff;
    }

    /* ============================================
       HORIZONTAL SCROLL (App Cards)
       ============================================ */

    .horizontal-scroll {
      display: flex;
      gap: var(--space-3);
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
      margin: 0 calc(-1 * var(--space-4));
      padding: 0 var(--space-4);
    }

    .horizontal-scroll::-webkit-scrollbar {
      display: none;
    }

    /* Featured App Card */
    .featured-card {
      flex: 0 0 300px;
      scroll-snap-align: start;
      background: var(--bg-elevated);
      border-radius: var(--radius-xl);
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(0,0,0,0.06);
    }

    .featured-card-image {
      width: 100%;
      height: 170px;
      object-fit: cover;
      background: var(--fill-secondary);
    }

    .featured-card-content {
      padding: var(--space-3);
    }

    .featured-card-category {
      font: var(--text-caption-1);
      color: var(--system-blue);
      text-transform: uppercase;
      font-weight: 600;
      letter-spacing: 0.4px;
    }

    .featured-card-title {
      font: var(--text-headline);
      margin: var(--space-1) 0;
    }

    .featured-card-subtitle {
      font: var(--text-subhead);
      color: var(--label-secondary);
    }

    /* Video Card */
    .video-card {
      position: relative;
      aspect-ratio: 16/9;
      border-radius: var(--radius-lg);
      overflow: hidden;
      background: #000;
    }

    .video-card video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* Screenshot Gallery */
    .screenshot-scroll {
      display: flex;
      gap: var(--space-2);
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
      margin: 0 calc(-1 * var(--space-4));
      padding: 0 var(--space-4) var(--space-2);
    }

    .screenshot-scroll::-webkit-scrollbar {
      display: none;
    }

    .screenshot-item {
      flex: 0 0 auto;
      width: 220px;
      border-radius: var(--radius-xl);
      overflow: hidden;
      scroll-snap-align: start;
      background: var(--fill-secondary);
    }

    .screenshot-item img,
    .screenshot-item video {
      width: 100%;
      height: auto;
    }

    /* ============================================
       CATEGORY GRID
       ============================================ */

    .category-list {
      background: var(--bg-elevated);
      border-radius: var(--radius-lg);
      overflow: hidden;
    }

    .category-item {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      padding: var(--space-3) var(--space-4);
      border-bottom: 0.33px solid var(--separator);
    }

    .category-item:last-child {
      border-bottom: none;
    }

    .category-item:active {
      background: var(--fill-secondary);
    }

    .category-icon {
      width: 32px;
      height: 32px;
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }

    .category-name {
      font: var(--text-body);
      flex: 1;
    }

    .category-chevron {
      width: 14px;
      height: 14px;
      color: var(--label-tertiary);
    }

    /* ============================================
       APP DETAIL PAGE
       ============================================ */

    .detail-page {
      position: fixed;
      inset: 0;
      z-index: 200;
      background: var(--bg-secondary);
      transform: translateY(100%);
      transition: transform 0.35s cubic-bezier(0.32, 0.72, 0, 1);
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }

    .detail-page.open {
      transform: translateY(0);
    }

    .detail-header {
      background: var(--bg-elevated);
      padding: var(--space-5);
      padding-top: calc(env(safe-area-inset-top, 20px) + var(--space-4));
    }

    .detail-close {
      position: absolute;
      top: calc(env(safe-area-inset-top, 20px) + var(--space-3));
      right: var(--space-4);
      width: 30px;
      height: 30px;
      background: var(--fill-primary);
      border-radius: 50%;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .detail-close svg {
      width: 14px;
      height: 14px;
      color: var(--label-secondary);
    }

    .detail-app-row {
      display: flex;
      gap: var(--space-4);
    }

    .detail-icon {
      width: 128px;
      height: 128px;
      border-radius: 28px;
      object-fit: cover;
      background: var(--fill-secondary);
    }

    .detail-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .detail-name {
      font: var(--text-title-2);
      margin-bottom: var(--space-1);
    }

    .detail-developer {
      font: var(--text-subhead);
      color: var(--label-secondary);
      margin-bottom: var(--space-3);
    }

    .detail-get-button {
      background: var(--system-blue);
      color: #fff;
      font: var(--text-headline);
      padding: var(--space-2) var(--space-6);
      border-radius: var(--radius-full);
      border: none;
      align-self: flex-start;
    }

    /* Info Bar */
    .info-bar {
      display: flex;
      justify-content: space-around;
      padding: var(--space-4);
      background: var(--bg-elevated);
      margin-top: var(--space-4);
      border-radius: var(--radius-lg);
    }

    .info-item {
      text-align: center;
      flex: 1;
    }

    .info-divider {
      width: 0.33px;
      background: var(--separator);
    }

    .info-value {
      font: var(--text-title-3);
      color: var(--label-secondary);
    }

    .info-label {
      font: var(--text-caption-1);
      color: var(--label-tertiary);
    }

    /* Detail Section */
    .detail-section {
      background: var(--bg-elevated);
      border-radius: var(--radius-lg);
      padding: var(--space-4);
      margin: var(--space-3) var(--space-4);
    }

    .detail-section-title {
      font: var(--text-title-3);
      margin-bottom: var(--space-2);
    }

    .detail-text {
      font: var(--text-body);
      color: var(--label-secondary);
      line-height: 1.5;
    }

    /* Feature List */
    .feature-list {
      list-style: none;
    }

    .feature-list li {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      padding: var(--space-2) 0;
    }

    .feature-list li svg {
      width: 22px;
      height: 22px;
      color: var(--system-blue);
      flex-shrink: 0;
    }

    .feature-list li span {
      font: var(--text-body);
    }

    /* Rating Display */
    .rating-display {
      display: flex;
      align-items: center;
      gap: var(--space-3);
    }

    .rating-big {
      font: var(--text-large-title);
    }

    .rating-stars {
      display: flex;
      gap: 2px;
    }

    .rating-stars svg {
      width: 16px;
      height: 16px;
      color: var(--system-orange);
    }

    .rating-stars svg.empty {
      color: var(--system-gray-3);
    }

    .rating-count {
      font: var(--text-caption-1);
      color: var(--label-tertiary);
    }

    /* ============================================
       PAGES
       ============================================ */

    .page {
      display: none;
    }

    .page.active {
      display: block;
    }

    /* ============================================
       UTILITIES
       ============================================ */

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      border: 0;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .animate-in {
      animation: fadeIn 0.3s ease-out forwards;
    }
  </style>
</head>
<body>
  <!-- Navigation Bar -->
  <header class="navigation-bar" id="navbar">
    <h1 class="nav-large-title">Today</h1>
    <h1 class="nav-inline-title">Today</h1>
    <div class="search-field">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"/>
        <path d="M21 21l-4.35-4.35"/>
      </svg>
      <input type="text" placeholder="Agents, Tools, More" id="searchInput">
    </div>
  </header>

  <main class="page-content">
    <!-- TODAY PAGE -->
    <div class="page active" id="todayPage">
      <!-- Featured Today Card -->
      <div class="today-card" onclick="openDetail('video-generator')">
        <div class="today-card-media">
          <video autoplay muted loop playsinline>
            <source src="https://static.higgsfield.ai/70e490b9-26b7-4572-8d9c-2ac8dcc9adc0.mp4" type="video/mp4">
          </video>
          <div class="today-card-gradient"></div>
        </div>
        <div class="today-card-content">
          <div class="today-card-label">Featured Agent</div>
          <h2 class="today-card-title">Video Generator</h2>
          <p class="today-card-subtitle">Create stunning AI videos with Runway Gen-3</p>
        </div>
      </div>

      <!-- Popular Now -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Popular Now</h2>
          <a class="section-action" href="#" onclick="showPage('appsPage'); return false;">See All</a>
        </div>

        <div class="horizontal-scroll">
          <div class="featured-card" onclick="openDetail('virtual-try-on')">
            <img class="featured-card-image" src="https://agent-assets-prod.muleusercontent.com/agents/agent-assets/20251111/54e2dc15-d602-40aa-9b09-0983f7a4f8b3/虚拟试衣.png" alt="Virtual Try-On">
            <div class="featured-card-content">
              <div class="featured-card-category">E-Commerce</div>
              <h3 class="featured-card-title">Virtual Try-On</h3>
              <p class="featured-card-subtitle">Transform clothing into model shots</p>
            </div>
          </div>

          <div class="featured-card" onclick="openDetail('face-swap')">
            <img class="featured-card-image" src="https://agent-assets-prod.muleusercontent.com/agents/agent-assets/20251111/3b3049b7-bc21-46a8-b445-f2e339e3e65a/换脸.png" alt="Face Swap">
            <div class="featured-card-content">
              <div class="featured-card-category">Creative</div>
              <h3 class="featured-card-title">Face Swap</h3>
              <p class="featured-card-subtitle">Realistic face swaps with AI</p>
            </div>
          </div>

          <div class="featured-card" onclick="openDetail('image-generator')">
            <img class="featured-card-image" src="https://assets-01.mulerun.com/agent/311be0d7-cd68-4fa7-99bc-232e535ebb39/v2025.09.02-07.37.32/showcase-1.png" alt="Image Generator">
            <div class="featured-card-content">
              <div class="featured-card-category">AI Art</div>
              <h3 class="featured-card-title">Image Generator</h3>
              <p class="featured-card-subtitle">Create images from text prompts</p>
            </div>
          </div>

          <div class="featured-card" onclick="openDetail('talking-avatar')">
            <img class="featured-card-image" src="https://cdn.higgsfield.ai/8ab53648-e4d3-41ad-900e-b38b6f33dbaf.webp" alt="Talking Avatar">
            <div class="featured-card-content">
              <div class="featured-card-category">Video</div>
              <h3 class="featured-card-title">Talking Avatar</h3>
              <p class="featured-card-subtitle">Create talking head videos</p>
            </div>
          </div>
        </div>
      </section>

      <!-- See It In Action -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">See It In Action</h2>
        </div>

        <div class="screenshot-scroll">
          <div class="screenshot-item">
            <video autoplay muted loop playsinline>
              <source src="https://cdn.higgsfield.ai/kling_motion/8c4795a8-e7ef-4272-8fb3-9d349192a013.mp4" type="video/mp4">
            </video>
          </div>
          <div class="screenshot-item">
            <video autoplay muted loop playsinline>
              <source src="https://cdn.higgsfield.ai/kling_motion/413e9bed-2fb7-4f61-b69f-e8c7466bfcf6.mp4" type="video/mp4">
            </video>
          </div>
          <div class="screenshot-item">
            <img src="https://dqv0cqkoy5oj7.cloudfront.net/user_2vtxM3DRcDcQIjpmiCpUDF2wcAT/453bc1ba-2cf6-4897-9268-a4403f35e18e_min.webp" alt="AI Generated">
          </div>
          <div class="screenshot-item">
            <video autoplay muted loop playsinline>
              <source src="https://cdn.higgsfield.ai/wan2_2_motion/22b6f9ca-5469-4086-8956-a2deb4944307.mp4" type="video/mp4">
            </video>
          </div>
          <div class="screenshot-item">
            <img src="https://d8j0ntlcm91z4.cloudfront.net/content_user_id/83034e1a-1d32-4053-a1bc-bbcb7a9491c8.jpeg" alt="Creative Output">
          </div>
        </div>
      </section>

      <!-- Image Processing -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Image Processing</h2>
          <a class="section-action" href="#" onclick="filterCategory('image'); return false;">See All</a>
        </div>

        <div style="background: var(--bg-elevated); border-radius: var(--radius-lg); overflow: hidden;">
          <a class="app-row" href="#" onclick="openDetail('background-remover'); return false;">
            <img class="app-icon" src="https://assets-01.mulerun.com/agent/10aa0000-d27e-49f0-9ee9-0ad7d99f57b3/v1.0.3/showcase-1.webp" alt="Background Remover">
            <div class="app-info">
              <div class="app-name">Background Remover</div>
              <div class="app-subtitle">Remove backgrounds instantly</div>
              <div class="app-meta">Image Processing</div>
            </div>
            <button class="get-button">GET</button>
          </a>

          <a class="app-row" href="#" onclick="openDetail('image-upscaler'); return false;">
            <img class="app-icon" src="https://assets-01.mulerun.com/agent/c55ea644-5e6f-45ca-bcb7-30135f3e984c/v1.0.1/showcase-1.webp" alt="Image Upscaler">
            <div class="app-info">
              <div class="app-name">Image Upscaler</div>
              <div class="app-subtitle">Enhance to 4x resolution</div>
              <div class="app-meta">Image Processing</div>
            </div>
            <button class="get-button">GET</button>
          </a>

          <a class="app-row" href="#" onclick="openDetail('portrait-enhancer'); return false;">
            <img class="app-icon" src="https://agent-assets-prod.muleusercontent.com/agents/agent-assets/20251111/71b89f38-5a95-496a-bdbd-2e1c30bdb993/cover-1_(10).png" alt="Portrait Enhancer">
            <div class="app-info">
              <div class="app-name">Portrait Enhancer</div>
              <div class="app-subtitle">Professional retouching</div>
              <div class="app-meta">Image Processing</div>
            </div>
            <button class="get-button">GET</button>
          </a>
        </div>
      </section>

      <!-- Video Creation -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Video Creation</h2>
          <a class="section-action" href="#" onclick="filterCategory('video'); return false;">See All</a>
        </div>

        <div class="horizontal-scroll">
          <div class="featured-card" onclick="openDetail('lip-sync')">
            <div class="video-card">
              <video autoplay muted loop playsinline>
                <source src="https://cdn.higgsfield.ai/kling_motion/dbe2fcf5-9605-41ea-96ed-b5b655bbbeb0.mp4" type="video/mp4">
              </video>
            </div>
            <div class="featured-card-content">
              <div class="featured-card-category">Video</div>
              <h3 class="featured-card-title">Lip Sync</h3>
              <p class="featured-card-subtitle">AI lip synchronization</p>
            </div>
          </div>

          <div class="featured-card" onclick="openDetail('image-animator')">
            <div class="video-card">
              <video autoplay muted loop playsinline>
                <source src="https://cdn.higgsfield.ai/minimax_hailuo_motion/382ba2da-a405-4459-89c2-c31a31469185.mp4" type="video/mp4">
              </video>
            </div>
            <div class="featured-card-content">
              <div class="featured-card-category">Animation</div>
              <h3 class="featured-card-title">Image Animator</h3>
              <p class="featured-card-subtitle">Animate still images</p>
            </div>
          </div>

          <div class="featured-card" onclick="openDetail('video-upscaler')">
            <img class="featured-card-image" src="https://cdn.higgsfield.ai/card/ae2180fa-cbab-47a1-b52e-bf07432f34f5.webp" alt="Video Upscaler">
            <div class="featured-card-content">
              <div class="featured-card-category">Enhancement</div>
              <h3 class="featured-card-title">Video Upscaler</h3>
              <p class="featured-card-subtitle">Upscale videos to 4K</p>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- APPS PAGE -->
    <div class="page" id="appsPage">
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Categories</h2>
        </div>

        <div class="category-list">
          <a class="category-item" href="#" onclick="filterCategory('image'); return false;">
            <div class="category-icon" style="background: linear-gradient(135deg, #FF6B6B, #FF8E53);">
              <span>&#128247;</span>
            </div>
            <span class="category-name">Image Processing</span>
            <svg class="category-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <path d="M9 18l6-6-6-6"/>
            </svg>
          </a>
          <a class="category-item" href="#" onclick="filterCategory('video'); return false;">
            <div class="category-icon" style="background: linear-gradient(135deg, #4ECDC4, #45B7AA);">
              <span>&#127909;</span>
            </div>
            <span class="category-name">Video Creation</span>
            <svg class="category-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <path d="M9 18l6-6-6-6"/>
            </svg>
          </a>
          <a class="category-item" href="#" onclick="filterCategory('audio'); return false;">
            <div class="category-icon" style="background: linear-gradient(135deg, #A18CD1, #FBC2EB);">
              <span>&#127911;</span>
            </div>
            <span class="category-name">Audio & Music</span>
            <svg class="category-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <path d="M9 18l6-6-6-6"/>
            </svg>
          </a>
          <a class="category-item" href="#" onclick="filterCategory('ecommerce'); return false;">
            <div class="category-icon" style="background: linear-gradient(135deg, #667eea, #764ba2);">
              <span>&#128722;</span>
            </div>
            <span class="category-name">E-Commerce</span>
            <svg class="category-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <path d="M9 18l6-6-6-6"/>
            </svg>
          </a>
          <a class="category-item" href="#" onclick="filterCategory('productivity'); return false;">
            <div class="category-icon" style="background: linear-gradient(135deg, #11998e, #38ef7d);">
              <span>&#128736;</span>
            </div>
            <span class="category-name">Productivity</span>
            <svg class="category-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <path d="M9 18l6-6-6-6"/>
            </svg>
          </a>
          <a class="category-item" href="#" onclick="filterCategory('creative'); return false;">
            <div class="category-icon" style="background: linear-gradient(135deg, #ee0979, #ff6a00);">
              <span>&#127912;</span>
            </div>
            <span class="category-name">Creative</span>
            <svg class="category-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <path d="M9 18l6-6-6-6"/>
            </svg>
          </a>
        </div>
      </section>

      <section class="section">
        <div class="section-header">
          <h2 class="section-title">All Agents</h2>
        </div>

        <div id="allAgentsList" style="background: var(--bg-elevated); border-radius: var(--radius-lg); overflow: hidden;">
          <!-- Dynamically populated -->
        </div>
      </section>
    </div>

    <!-- SEARCH PAGE -->
    <div class="page" id="searchPage">
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Discover</h2>
        </div>

        <div class="category-list" style="margin-bottom: var(--space-5);">
          <a class="category-item" href="#" onclick="searchFor('face'); return false;">
            <span class="category-name">Face Tools</span>
          </a>
          <a class="category-item" href="#" onclick="searchFor('video'); return false;">
            <span class="category-name">Video</span>
          </a>
          <a class="category-item" href="#" onclick="searchFor('image'); return false;">
            <span class="category-name">Image</span>
          </a>
          <a class="category-item" href="#" onclick="searchFor('content'); return false;">
            <span class="category-name">Content</span>
          </a>
        </div>
      </section>

      <section class="section">
        <div class="section-header">
          <h2 class="section-title" id="searchResultsTitle">Search Results</h2>
        </div>

        <div id="searchResults" style="background: var(--bg-elevated); border-radius: var(--radius-lg); overflow: hidden;">
          <p style="padding: var(--space-5); text-align: center; color: var(--label-tertiary);">
            Start typing to search...
          </p>
        </div>
      </section>
    </div>
  </main>

  <!-- Tab Bar -->
  <nav class="tab-bar">
    <a class="tab-item active" href="#" onclick="showPage('todayPage')" data-page="todayPage">
      <svg viewBox="0 0 24 24" fill="currentColor">
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
      </svg>
      <span>Today</span>
    </a>
    <a class="tab-item" href="#" onclick="showPage('appsPage')" data-page="appsPage">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="3" width="7" height="7" rx="1"/>
        <rect x="14" y="3" width="7" height="7" rx="1"/>
        <rect x="3" y="14" width="7" height="7" rx="1"/>
        <rect x="14" y="14" width="7" height="7" rx="1"/>
      </svg>
      <span>Agents</span>
    </a>
    <a class="tab-item" href="#" onclick="showPage('searchPage')" data-page="searchPage">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"/>
        <path d="M21 21l-4.35-4.35"/>
      </svg>
      <span>Search</span>
    </a>
  </nav>

  <!-- Detail Page -->
  <div class="detail-page" id="detailPage">
    <button class="detail-close" onclick="closeDetail()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <path d="M18 6L6 18M6 6l12 12"/>
      </svg>
    </button>
    <div id="detailContent">
      <!-- Dynamic content -->
    </div>
  </div>

  <script>
    // Complete Agent Database with Real Assets
    const agents = {
      'virtual-try-on': {
        id: 'virtual-try-on',
        name: 'Virtual Try-On',
        category: 'E-Commerce',
        categoryKey: 'ecommerce',
        description: 'Transform flat-lay clothing into photorealistic model shots. Eliminate expensive photoshoots while maintaining studio quality. Our AI analyzes garment details, fabric textures, and creates natural-looking fits on virtual models.',
        icon: 'https://agent-assets-prod.muleusercontent.com/agents/agent-assets/20251111/54e2dc15-d602-40aa-9b09-0983f7a4f8b3/虚拟试衣.png',
        screenshots: [
          'https://agent-assets-prod.muleusercontent.com/agents/agent-assets/20251111/71b89f38-5a95-496a-bdbd-2e1c30bdb993/cover-1_(10).png',
          'https://agent-assets-prod.muleusercontent.com/agents/agent-assets/20251111/cbadc961-804c-4059-a140-fff3fddc70d7/cover_(12).png'
        ],
        rating: 4.8,
        reviews: '15.2K',
        tier: 'Pro',
        features: ['Person validation', 'Garment classification', 'Virtual fitting', 'Multiple garment types'],
        version: '1.0.0',
        size: '~30 sec',
        developer: 'MuleRun'
      },
      'face-swap': {
        id: 'face-swap',
        name: 'Face Swap',
        category: 'Creative',
        categoryKey: 'creative',
        description: 'Swap faces between two images seamlessly using advanced AI. Features high quality swap, face detection, natural blending, and support for multiple faces.',
        icon: 'https://agent-assets-prod.muleusercontent.com/agents/agent-assets/20251111/3b3049b7-bc21-46a8-b445-f2e339e3e65a/换脸.png',
        screenshots: [
          'https://agent-assets-prod.muleusercontent.com/agents/agent-assets/20251111/a72088b2-0505-4924-bf9b-6c9e1c49db8b/cover-2_(3).png'
        ],
        rating: 4.7,
        reviews: '12.8K',
        tier: 'Pro',
        features: ['High quality swap', 'Face detection', 'Natural blending', 'Multiple faces'],
        version: '1.0.0',
        size: '~45 sec',
        developer: 'Higgsfield AI'
      },
      'image-generator': {
        id: 'image-generator',
        name: 'Image Generator',
        category: 'AI Art',
        categoryKey: 'image',
        description: 'Multi-provider AI image generation using DALL-E 3, Stability AI, and Flux models. Create stunning visuals from text prompts.',
        icon: 'https://assets-01.mulerun.com/agent/311be0d7-cd68-4fa7-99bc-232e535ebb39/v2025.09.02-07.37.32/showcase-1.png',
        screenshots: [
          'https://assets-01.mulerun.com/agent/311be0d7-cd68-4fa7-99bc-232e535ebb39/v2025.09.02-07.37.32/showcase-2.webp',
          'https://dqv0cqkoy5oj7.cloudfront.net/user_2vtxM3DRcDcQIjpmiCpUDF2wcAT/453bc1ba-2cf6-4897-9268-a4403f35e18e_min.webp'
        ],
        rating: 4.9,
        reviews: '28.5K',
        tier: 'Pro',
        features: ['DALL-E 3', 'Stability SDXL', 'Flux Models', 'Multiple Styles'],
        version: '1.0.0',
        size: '~20 sec',
        developer: 'Higgsfield AI'
      },
      'background-remover': {
        id: 'background-remover',
        name: 'Background Remover',
        category: 'Image Processing',
        categoryKey: 'image',
        description: 'Remove backgrounds from images instantly using AI. Perfect for product photography and marketing materials.',
        icon: 'https://assets-01.mulerun.com/agent/10aa0000-d27e-49f0-9ee9-0ad7d99f57b3/v1.0.3/showcase-1.webp',
        screenshots: [
          'https://assets-01.mulerun.com/agent/10aa0000-d27e-49f0-9ee9-0ad7d99f57b3/v1.0.3/showcase-2.webp'
        ],
        rating: 4.8,
        reviews: '45.1K',
        tier: 'Starter',
        features: ['Instant removal', 'High quality edges', 'Transparent PNG', 'Batch processing'],
        version: '1.0.0',
        size: '~5 sec',
        developer: 'MuleRun'
      },
      'video-generator': {
        id: 'video-generator',
        name: 'Video Generator',
        category: 'Video',
        categoryKey: 'video',
        description: 'AI video generation using Runway Gen-3 Alpha. Create stunning videos from text or images.',
        icon: 'https://cdn.higgsfield.ai/card/ae2180fa-cbab-47a1-b52e-bf07432f34f5.webp',
        videos: ['https://static.higgsfield.ai/70e490b9-26b7-4572-8d9c-2ac8dcc9adc0.mp4'],
        rating: 4.9,
        reviews: '8.3K',
        tier: 'Enterprise',
        features: ['Text-to-Video', 'Image-to-Video', 'Gen-3 Alpha', 'Multiple Durations'],
        version: '1.0.0',
        size: '~2 min',
        developer: 'Higgsfield AI'
      },
      'lip-sync': {
        id: 'lip-sync',
        name: 'Lip Sync',
        category: 'Video',
        categoryKey: 'video',
        description: 'AI-powered lip synchronization for videos. Perfect for dubbing and localization.',
        icon: 'https://cdn.higgsfield.ai/card/75702883-8d92-4737-94f0-975af4036cec.webp',
        videos: ['https://cdn.higgsfield.ai/kling_motion/dbe2fcf5-9605-41ea-96ed-b5b655bbbeb0.mp4'],
        rating: 4.6,
        reviews: '5.2K',
        tier: 'Pro',
        features: ['Audio Sync', 'Multiple Models', 'Quality Control', 'Emotion Transfer'],
        version: '1.0.0',
        size: '~1 min',
        developer: 'Higgsfield AI'
      },
      'talking-avatar': {
        id: 'talking-avatar',
        name: 'Talking Avatar',
        category: 'Video',
        categoryKey: 'video',
        description: 'Generate talking head videos from still images.',
        icon: 'https://cdn.higgsfield.ai/8ab53648-e4d3-41ad-900e-b38b6f33dbaf.webp',
        screenshots: ['https://cdn.higgsfield.ai/8ab53648-e4d3-41ad-900e-b38b6f33dbaf.webp'],
        rating: 4.7,
        reviews: '6.8K',
        tier: 'Pro',
        features: ['Image to Video', 'Text-to-Speech', 'Expression Control', 'Multiple Styles'],
        version: '1.0.0',
        size: '~1 min',
        developer: 'Higgsfield AI'
      },
      'image-upscaler': {
        id: 'image-upscaler',
        name: 'Image Upscaler',
        category: 'Image Processing',
        categoryKey: 'image',
        description: 'AI image upscaling and enhancement up to 4x resolution.',
        icon: 'https://assets-01.mulerun.com/agent/c55ea644-5e6f-45ca-bcb7-30135f3e984c/v1.0.1/showcase-1.webp',
        screenshots: [
          'https://assets-01.mulerun.com/agent/c55ea644-5e6f-45ca-bcb7-30135f3e984c/v1.0.1/showcase-2.webp'
        ],
        rating: 4.8,
        reviews: '22.4K',
        tier: 'Starter',
        features: ['4x Upscale', 'Noise Reduction', 'Face Enhancement', 'Detail Restoration'],
        version: '1.0.0',
        size: '~15 sec',
        developer: 'MuleRun'
      },
      'portrait-enhancer': {
        id: 'portrait-enhancer',
        name: 'Portrait Enhancer',
        category: 'Image Processing',
        categoryKey: 'image',
        description: 'Professional portrait enhancement and retouching with AI.',
        icon: 'https://agent-assets-prod.muleusercontent.com/agents/agent-assets/20251111/71b89f38-5a95-496a-bdbd-2e1c30bdb993/cover-1_(10).png',
        screenshots: [],
        rating: 4.6,
        reviews: '9.1K',
        tier: 'Starter',
        features: ['Skin Smoothing', 'Eye Enhancement', 'Lighting Fix', 'Natural Results'],
        version: '1.0.0',
        size: '~10 sec',
        developer: 'MuleRun'
      },
      'image-animator': {
        id: 'image-animator',
        name: 'Image Animator',
        category: 'Video',
        categoryKey: 'video',
        description: 'Animate still images with AI motion synthesis.',
        icon: 'https://cdn.higgsfield.ai/card/ae2180fa-cbab-47a1-b52e-bf07432f34f5.webp',
        videos: ['https://cdn.higgsfield.ai/wan2_2_motion/22b6f9ca-5469-4086-8956-a2deb4944307.mp4'],
        rating: 4.7,
        reviews: '4.2K',
        tier: 'Pro',
        features: ['Motion Synthesis', 'Loop Creation', 'Depth Estimation', 'Parallax Effect'],
        version: '1.0.0',
        size: '~30 sec',
        developer: 'Higgsfield AI'
      },
      'video-upscaler': {
        id: 'video-upscaler',
        name: 'Video Upscaler',
        category: 'Video',
        categoryKey: 'video',
        description: 'Upscale and enhance video quality up to 4K.',
        icon: 'https://cdn.higgsfield.ai/card/ae2180fa-cbab-47a1-b52e-bf07432f34f5.webp',
        screenshots: [],
        rating: 4.6,
        reviews: '3.8K',
        tier: 'Pro',
        features: ['4K Upscale', 'Frame Interpolation', 'Stabilization', 'Denoising'],
        version: '1.0.0',
        size: '~5 min',
        developer: 'Higgsfield AI'
      },
      'music-generator': {
        id: 'music-generator',
        name: 'Music Generator',
        category: 'Audio',
        categoryKey: 'audio',
        description: 'AI music and sound effect generation with MusicGen.',
        icon: 'https://assets-01.mulerun.com/pages/landing/agents/agent-head-3.webp',
        screenshots: [],
        rating: 4.5,
        reviews: '2.1K',
        tier: 'Pro',
        features: ['MusicGen', 'Sound Effects', 'Ambient', 'Style Control'],
        version: '1.0.0',
        size: '~45 sec',
        developer: 'Higgsfield AI'
      },
      'voice-cloner': {
        id: 'voice-cloner',
        name: 'Voice Cloner',
        category: 'Audio',
        categoryKey: 'audio',
        description: 'AI voice synthesis with multiple voice presets using Bark.',
        icon: 'https://assets-01.mulerun.com/pages/landing/agents/agent-head-4.webp',
        screenshots: [],
        rating: 4.4,
        reviews: '1.8K',
        tier: 'Enterprise',
        features: ['Voice Synthesis', 'Multiple Presets', 'Natural Speech', 'Multi-Language'],
        version: '1.0.0',
        size: '~3 min',
        developer: 'Higgsfield AI'
      },
      'ai-model-swap': {
        id: 'ai-model-swap',
        name: 'AI Model Swap',
        category: 'E-Commerce',
        categoryKey: 'ecommerce',
        description: 'Swap fashion models in product photos while keeping garments intact.',
        icon: 'https://agent-assets-prod.muleusercontent.com/agents/agent-assets/20251111/8e282302-b729-45c7-be39-7c48b3161a96/cover_(11).png',
        screenshots: [
          'https://agent-assets-prod.muleusercontent.com/agents/agent-assets/20251111/09d4e979-5eb0-4e27-b865-c3856d6cccd0/模特换肤.png'
        ],
        rating: 4.7,
        reviews: '5.6K',
        tier: 'Pro',
        features: ['Model replacement', 'Garment preservation', 'Pose matching', 'Natural results'],
        version: '1.0.0',
        size: '~1 min',
        developer: 'MuleRun'
      },
      'chibi-sticker-maker': {
        id: 'chibi-sticker-maker',
        name: 'Chibi Sticker Maker',
        category: 'Creative',
        categoryKey: 'creative',
        description: 'Turn photos into cute sticker packs instantly.',
        icon: 'https://assets-01.mulerun.com/agent/82428895-e64f-4339-ba9f-1ac174b2bb4a/v1.0.1/showcase-1.png',
        screenshots: [
          'https://assets-01.mulerun.com/agent/82428895-e64f-4339-ba9f-1ac174b2bb4a/v1.0.1/showcase-2.webp'
        ],
        rating: 4.9,
        reviews: '8.4K',
        tier: 'Starter',
        features: ['Cute stickers', 'Multiple poses', 'Expression variants', 'Instant generation'],
        version: '1.0.0',
        size: '~15 sec',
        developer: 'MuleRun'
      },
      'product-description-writer': {
        id: 'product-description-writer',
        name: 'Product Description Writer',
        category: 'Content',
        categoryKey: 'productivity',
        description: 'Generate compelling product descriptions with SEO optimization.',
        icon: 'https://agent-assets-prod.muleusercontent.com/agents/agent-assets/20251110/c3e5fd64-938e-4bd1-b389-71d113b3ed28/mulerun3.png',
        screenshots: [],
        rating: 4.8,
        reviews: '18.2K',
        tier: 'Free',
        features: ['Platform optimization', 'SEO integration', 'Multiple variations', 'Benefit highlighting'],
        version: '1.0.0',
        size: '~5 sec',
        developer: 'MuleRun'
      }
    };

    // Page Navigation
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));

      document.getElementById(pageId).classList.add('active');
      document.querySelector(`[data-page="${pageId}"]`).classList.add('active');

      // Update nav title
      const titles = { todayPage: 'Today', appsPage: 'Agents', searchPage: 'Search' };
      document.querySelector('.nav-large-title').textContent = titles[pageId] || 'Today';
      document.querySelector('.nav-inline-title').textContent = titles[pageId] || 'Today';

      if (pageId === 'appsPage') populateAllAgents();
    }

    // Populate All Agents
    function populateAllAgents() {
      const container = document.getElementById('allAgentsList');
      container.innerHTML = Object.values(agents).map(a => `
        <a class="app-row" href="#" onclick="openDetail('${a.id}'); return false;">
          <img class="app-icon" src="${a.icon}" alt="${a.name}">
          <div class="app-info">
            <div class="app-name">${a.name}</div>
            <div class="app-subtitle">${a.description.substring(0, 40)}...</div>
            <div class="app-meta">${a.category}</div>
          </div>
          <button class="get-button">${a.tier === 'Free' ? 'FREE' : 'GET'}</button>
        </a>
      `).join('');
    }

    // Filter by Category
    function filterCategory(cat) {
      showPage('searchPage');
      const filtered = Object.values(agents).filter(a =>
        a.categoryKey === cat || a.category.toLowerCase().includes(cat)
      );
      displayResults(filtered);
      document.getElementById('searchResultsTitle').textContent = `${cat.charAt(0).toUpperCase() + cat.slice(1)} Agents`;
    }

    // Search
    function searchFor(query) {
      const filtered = Object.values(agents).filter(a =>
        a.name.toLowerCase().includes(query.toLowerCase()) ||
        a.description.toLowerCase().includes(query.toLowerCase()) ||
        a.category.toLowerCase().includes(query.toLowerCase())
      );
      displayResults(filtered);
    }

    // Display Results
    function displayResults(results) {
      const container = document.getElementById('searchResults');
      if (results.length === 0) {
        container.innerHTML = '<p style="padding: var(--space-5); text-align: center; color: var(--label-tertiary);">No results found</p>';
        return;
      }
      container.innerHTML = results.map(a => `
        <a class="app-row" href="#" onclick="openDetail('${a.id}'); return false;">
          <img class="app-icon" src="${a.icon}" alt="${a.name}">
          <div class="app-info">
            <div class="app-name">${a.name}</div>
            <div class="app-subtitle">${a.description.substring(0, 40)}...</div>
            <div class="app-meta">${a.category}</div>
          </div>
          <button class="get-button">${a.tier === 'Free' ? 'FREE' : 'GET'}</button>
        </a>
      `).join('');
    }

    // Search Input
    document.getElementById('searchInput').addEventListener('input', e => {
      if (e.target.value.length > 0) {
        showPage('searchPage');
        searchFor(e.target.value);
        document.getElementById('searchResultsTitle').textContent = 'Search Results';
      }
    });

    // Open Detail
    function openDetail(agentId) {
      const agent = agents[agentId];
      if (!agent) return;

      const stars = Array(5).fill(0).map((_, i) =>
        `<svg class="${i < Math.floor(agent.rating) ? '' : 'empty'}" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>`
      ).join('');

      const media = agent.videos?.map(v => `
        <div class="screenshot-item">
          <video autoplay muted loop playsinline><source src="${v}" type="video/mp4"></video>
        </div>
      `).join('') || '';

      const screenshots = agent.screenshots?.map(s => `
        <div class="screenshot-item"><img src="${s}" alt="Screenshot"></div>
      `).join('') || '';

      const features = agent.features.map(f => `
        <li>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 6L9 17l-5-5"/>
          </svg>
          <span>${f}</span>
        </li>
      `).join('');

      document.getElementById('detailContent').innerHTML = `
        <div class="detail-header">
          <div class="detail-app-row">
            <img class="detail-icon" src="${agent.icon}" alt="${agent.name}">
            <div class="detail-info">
              <h1 class="detail-name">${agent.name}</h1>
              <div class="detail-developer">${agent.developer}</div>
              <button class="detail-get-button" onclick="window.location.href='/test-all-agents.html#${agent.id}'">
                ${agent.tier === 'Free' ? 'GET - FREE' : 'GET'}
              </button>
            </div>
          </div>
        </div>

        <div style="padding: 0 var(--space-4);">
          <div class="info-bar">
            <div class="info-item">
              <div class="info-value">${agent.rating}</div>
              <div class="info-label">${agent.reviews} Ratings</div>
            </div>
            <div class="info-divider"></div>
            <div class="info-item">
              <div class="info-value">${agent.tier}</div>
              <div class="info-label">Tier</div>
            </div>
            <div class="info-divider"></div>
            <div class="info-item">
              <div class="info-value">${agent.size}</div>
              <div class="info-label">Processing</div>
            </div>
          </div>
        </div>

        ${(media || screenshots) ? `
          <section class="section" style="margin: var(--space-4);">
            <div class="section-header">
              <h2 class="section-title">Preview</h2>
            </div>
            <div class="screenshot-scroll" style="margin: 0 calc(-1 * var(--space-4)); padding: 0 var(--space-4);">
              ${media}${screenshots}
            </div>
          </section>
        ` : ''}

        <div class="detail-section">
          <h3 class="detail-section-title">Description</h3>
          <p class="detail-text">${agent.description}</p>
        </div>

        <div class="detail-section">
          <h3 class="detail-section-title">What's New</h3>
          <p style="font: var(--text-caption-1); color: var(--label-tertiary); margin-bottom: var(--space-2);">Version ${agent.version}</p>
          <p class="detail-text">Latest updates and improvements</p>
        </div>

        <div class="detail-section">
          <h3 class="detail-section-title">Features</h3>
          <ul class="feature-list">${features}</ul>
        </div>

        <div class="detail-section" style="margin-bottom: 100px;">
          <h3 class="detail-section-title">Ratings & Reviews</h3>
          <div class="rating-display">
            <span class="rating-big">${agent.rating}</span>
            <div>
              <div class="rating-stars">${stars}</div>
              <div class="rating-count">${agent.reviews} Reviews</div>
            </div>
          </div>
        </div>
      `;

      document.getElementById('detailPage').classList.add('open');
      document.body.style.overflow = 'hidden';
    }

    // Close Detail
    function closeDetail() {
      document.getElementById('detailPage').classList.remove('open');
      document.body.style.overflow = '';
    }

    // Scroll Detection for Nav Bar
    let lastScroll = 0;
    window.addEventListener('scroll', () => {
      const navbar = document.getElementById('navbar');
      if (window.scrollY > 50) {
        navbar.classList.add('scrolled');
      } else {
        navbar.classList.remove('scrolled');
      }
    });

    // Initialize
    populateAllAgents();
  </script>
</body>
</html>
